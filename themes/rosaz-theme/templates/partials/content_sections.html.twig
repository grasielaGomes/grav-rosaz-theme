{# Content sections partial (text-only with optional highlights) #}

{# Allow passing sections via "with { sections: ... }".
   If not provided, fall back to page.header.content_sections. #}
{% set sections = sections is defined
  ? sections
  : (page.header.content_sections|default([]))
%}

{% if sections is iterable and sections|length %}
  {% for section in sections %}
    {# Determine if section is enabled (default: true) #}
    {% set enabled = section.enabled is not defined or section.enabled %}

    {% if enabled %}
      {% set bg_color = section.background_color|default('#ffffff') %}
      {% set has_highlights = section.highlights is iterable and section.highlights|length %}

      <section
        {% if section.id is defined and section.id %}
          id="{{ section.id }}"
        {% endif %}
        class="py-12 md:py-24"
        style="background-color: {{ bg_color }};"
      >
        <div class="max-w-4xl mx-auto px-4">
          <div class="space-y-8 flex flex-col gap-2">
            {# Eyebrow #}
            {% if section.eyebrow is defined and section.eyebrow %}
              <p class="text-xs font-semibold tracking-[0.25em] uppercase text-orange-400">
                {{ section.eyebrow }}
              </p>
            {% endif %}

            {# Title #}
            {% if section.title is defined and section.title %}
              <h2 class="text-2xl md:text-3xl font-semibold text-neutral-900">
                {{ section.title }}
              </h2>
            {% endif %}

            {# Main text #}
            {% if section.text is defined and section.text %}
              <p class="text-sm md:text-base text-neutral-700 leading-relaxed">
                {{ section.text }}
              </p>
            {% endif %}

            {# Highlights grid #}
            {% if has_highlights %}
              <div class="grid gap-6 md:gap-8 sm:grid-cols-2 mt-8 md:mt-10">
                {% for h in section.highlights %}
                  <div class="flex items-start gap-3">
                    <span
                      class="mt-1 flex h-8 w-8 items-center justify-center rounded-full border border-orange-400 text-orange-500 text-sm flex-shrink-0"
                    >
                      âœ“
                    </span>
                    <div class="text-left space-y-1">
                      {% if h.label is defined and h.label %}
                        <p class="text-sm font-semibold text-neutral-900">
                          {{ h.label }}
                        </p>
                      {% endif %}
                      {% if h.text is defined and h.text %}
                        <p class="text-xs md:text-sm text-neutral-600 leading-relaxed">
                          {{ h.text }}
                        </p>
                      {% endif %}
                    </div>
                  </div>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
      </section>
    {% endif %}
  {% endfor %}
{% endif %}
