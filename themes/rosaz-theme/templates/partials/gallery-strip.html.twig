
{% set gallery = gallery is defined ? gallery : (page.header.gallery_strip ?? {}) %}

{% set enabled = gallery.enabled is not defined or gallery.enabled %}
{% set bg_color = gallery.background_color|default('#0f172a') %}
{% set items = gallery.images|default([]) %}

{% if enabled and items is iterable and items|length %}
  <section
    class="py-2"
    style="background-color: {{ bg_color }};"
  >
    <div class="max-w-6xl mx-auto px-0 md:px-4">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-2">
        {% for item in items %}
          {# can be a string ("foto.jpg") or an object { src, alt } #}
          {% if item is iterable %}
            {% set src = item.src|default('') %}
            {% set alt = item.alt|default('') %}
          {% else %}
            {% set src = item %}
            {% set alt = '' %}
          {% endif %}

          {% set media = src ? page.media[src]|default(null) : null %}
          {% set image_url = media ? media.url : src %}

          {% if image_url %}
            <div class="group relative overflow-hidden">
              <div class="h-56 lg:h-80 w-full">
                <img
                  src="{{ image_url }}"
                  alt="{{ alt|e }}"
                  class="w-full h-full object-cover transform transition-transform duration-500 ease-out group-hover:scale-110"
                />
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </section>
{% endif %}
